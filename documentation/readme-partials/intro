# Kubernetes-admin-toolkit (kat)

## Overview
- container with various tools to assist in a kubernetes cluster administration/troubleshooting
- GMT timezone and GB locale
- additional tools pre-installed

## Deployment

### Docker
```bash
# run single command
d run -it --rm \
--name kubernetes-admin-toolkit-throwaway \
adegoodyer/kubernetes-admin-toolkit:latest \
curl -L --head google.co.uk

# disposable container
d run -it --rm \
--name kubernetes-admin-toolkit-throwaway \
adegoodyer/kubernetes-admin-toolkit:latest \
/bin/bash

# persistent container
d run -itd \
--name kubernetes-admin-toolkit-latest \
adegoodyer/kubernetes-admin-toolkit:latest

# connect to persistent container
d exec -it kubernetes-admin-toolkit-latest /bin/bash
```

## Build Commands

### Documentation
```bash
# generate grype, syft and README.md
./scripts/gen-docs.sh
```

### Git
- make code changes and push with git as usual
- image build and push will occur when a tag is added
  - can be any branch
  - can be any format but must start with a 'v'
```bash
# add tag
git tag -a v1.1.0 -m "v1.1.0"

# push tag
git push --follow-tags
```

### Docker
```bash
# build and test locally
d build -t kubernetes-admin-toolkit:test . &&
d run -it --rm \
--name kubernetes-admin-toolkit-test \
kubernetes-admin-toolkit:test \
/bin/bash

# build image
d build -t adegoodyer/kubernetes-admin-toolkit:v0.0.1 -t adegoodyer/kubernetes-admin-toolkit:latest .

# sec scan
grype adegoodyer/kubernetes-admin-toolkit:latest

# generate SBOM
syft adegoodyer/kubernetes-admin-toolkit:latest

# push image
d logout && d login --username=adegoodyer
d push adegoodyer/ubuntu --all-tags
```
